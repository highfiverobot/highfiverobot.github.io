<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Table</title>
    <!-- Tailwind CSS CDN for basic styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Halka grey background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Varun align kara */
            min-height: 100vh;
            padding: 2rem;
        }
        .container {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1rem; /* Gol kinare */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Halaki shadow */
            width: 100%;
            max-width: 960px; /* Vachanasaathi sarvottam lambi */
            overflow-x: auto; /* Lamb tables saathi horizontal scrolling saksham kara */
        }
        table {
            width: 100%;
            border-collapse: separate; /* Cell var border-radius la anumati dete */
            border-spacing: 0;
            border-radius: 0.5rem; /* Table saathi gol kinare */
            overflow: hidden; /* Content border-radius cha adhar kare he sunishchit karte */
        }
        th, td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb; /* Halka grey border */
        }
        th {
            background-color: #4f46e5; /* Indigo 600 */
            color: #ffffff;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.875rem; /* lahan text */
        }
        tr:last-child td {
            border-bottom: none; /* Shevatachya row saathi border nahi */
        }
        tbody tr:hover {
            background-color: #eff6ff; /* Hover var halka blue */
        }
        .loading-message {
            text-align: center;
            padding: 2rem;
            font-size: 1.125rem; /* motha text */
            color: #6b7280; /* Grey 500 */
        }
        .error-message {
            text-align: center;
            padding: 2rem;
            font-size: 1.125rem; /* motha text */
            color: #ef4444; /* Red 500 */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">CSV Data Display</h1>
        <div id="table-container" class="loading-message">
            Loading data...
        </div>
    </div>

    <!-- Papa Parse CDN for easy CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <script>
        // Function to fetch CSV data and render it as an HTML table
        // CSV data fetch karun HTML table madhye render karnyache function
        async function loadCsvData() {
            const tableContainer = document.getElementById('table-container');
            // CSV file cha path. Sadha relative path vaparla ahe, jo GitHub Pages var vyavasthit chalel.
            // CSV file path. A simple relative path is used, which will work correctly on GitHub Pages.
            const csvFilePath = 'data.csv'; 

            try {
                // CSV file fetch kara
                // CSV file aanun ghya
                const response = await fetch(csvFilePath);

                // Fetch यशस्वी jhala ka te tapasun ghya
                // Fetch यशस्वी झाला का ते तपासून घ्या
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                // CSV file chi text content ghya
                // CSV फाइलमधील मजकूर मिळवा
                const csvText = await response.text();

                // Papa Parse vaprun CSV text parse kara
                // Papa Parse वापरून CSV मजकूर पार्स करा
                PapaParse.parse(csvText, {
                    header: true, // Pahili row headers mhanun vapra
                    skipEmptyLines: true, // Rikamya rows ignore kara
                    complete: function(results) {
                        const data = results.data;
                        const errors = results.errors;

                        if (errors.length > 0) {
                            console.error("CSV Parsing Errors:", errors);
                            tableContainer.innerHTML = `<div class="error-message">Error parsing CSV: ${errors[0].message}</div>`;
                            return;
                        }

                        if (data.length === 0) {
                            tableContainer.innerHTML = `<div class="loading-message">No data found in CSV.</div>`;
                            return;
                        }

                        // Table element create kara
                        // टेबल घटक तयार करा
                        const table = document.createElement('table');
                        table.classList.add('min-w-full', 'divide-y', 'divide-gray-200', 'shadow-sm', 'rounded-lg');

                        // Table header (thead) create kara
                        // टेबल शीर्षलेख (thead) तयार करा
                        const thead = document.createElement('thead');
                        const headerRow = document.createElement('tr');
                        // Papa Parse pasun column headers madhun loop kara
                        // Papa Parse मधून स्तंभ शीर्षलेखांमधून लूप करा
                        results.meta.fields.forEach(field => {
                            const th = document.createElement('th');
                            th.textContent = field;
                            headerRow.appendChild(th);
                        });
                        thead.appendChild(headerRow);
                        table.appendChild(thead);

                        // Table body (tbody) create kara
                        // टेबल बॉडी (tbody) तयार करा
                        const tbody = document.createElement('tbody');
                        tbody.classList.add('bg-white', 'divide-y', 'divide-gray-200');

                        // Data rows madhun loop kara
                        // डेटा पंक्तींमधून लूप करा
                        data.forEach(rowData => {
                            const tr = document.createElement('tr');
                            // Each row saathi values madhun loop kara (order sunishchit karnyasaathi meta madhun fields vaprun)
                            // प्रत्येक पंक्तीसाठी मूल्यांमधून लूप करा (क्रम सुनिश्चित करण्यासाठी मेटा मधील फील्ड वापरून)
                            results.meta.fields.forEach(field => {
                                const td = document.createElement('td');
                                td.textContent = rowData[field] || ''; // Undefined values vyavasthit handle karnyasaathi || '' vapra
                                tr.appendChild(td);
                            });
                            tbody.appendChild(tr);
                        });
                        table.appendChild(tbody);

                        // Loading message clear kara ani table jodun ghya
                        // लोडिंग संदेश साफ करा आणि टेबल जोडा
                        tableContainer.innerHTML = '';
                        tableContainer.appendChild(table);
                    }
                });

            } catch (error) {
                console.error('Error loading CSV data:', error);
                tableContainer.innerHTML = `<div class="error-message">Failed to load CSV data. Please check the file path and network connection.</div>`;
            }
        }

        // DOM purn load jhalyavar function call kara
        // DOM पूर्ण लोड झाल्यावर फंक्शन कॉल करा
        document.addEventListener('DOMContentLoaded', loadCsvData);
    </script>
</body>
</html>
